{% extends "base.html" %} 
{% load thumbnail %}

{% block title %} fixcity - overview page  {% endblock %} 

{% block extra_header %} 
<script src="/site_media/openlayers/OpenLayers.js"></script>
<script type="text/javascript" src="/site_media/openlayers/OpenLayers.js"></script>
<script type="text/javascript">
  // Settings needed by rackmap.js.
  var pointRadius = "10";
  var externalGraphic = "/site_media/img/rack.png";
  var WKT = "{{ rack.location.wkt }}";
  function post_loadmap(map, geom) {
    map.setCenter(geom.getBounds().getCenterLonLat(), 16);
  };
</script>
<script type="text/javascript" src="/site_media/js/rackmap.js"></script>

{% endblock %}

{% block menu %} 
{% endblock %} 

{% block lede %}
<h1>View Rack</h1> <a href="/rack/new">Suggest a new Rack</a>
{% endblock %}

{% block content %}
<div id="rackinfo">
  <dl>
    <dt>Street Address</dt>
    <dd>{{rack.address}}</dd>
    <dt>Establishment</dt>
    <dd>{{rack.title}}</dd>
    <dt>Description</dt>
    <dd>{{rack.description}}</dd>
    <dt>Photo</dt>
    <dd>
    {% if rack.photo %}
    <img src="{{rack.photo.extra_thumbnails.large}}" />
    {% else %}
      <div class="error error-photo">
        <h2> No photos about this request </h2>
      </div>
   {% endif %}
    </dd>
  </dl>
  <ul id="support-statements">
  {% for object in statement_query %}
    <li><a href="{{object.file.url}}">Statement of support</a></li>
  {% endfor %}
  </ul>
    
  {% if user.is_authenticated %}
  <a class="fakebigbutton" href="/admin/bmabr/rack/{{rack.id}}/edit">Edit this Rack</a>
  {% else %}
  <a class="fakebigbutton" href="/accounts/login">Log in to Edit</a>
  {% endif %}
  </div><!-- /#rackinfo -->
    
<div class="suggest">
	<div id="request-map">
	</div>
</div><!-- /#suggest -->

{% endblock %} 



