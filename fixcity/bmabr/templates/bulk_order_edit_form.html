{% extends "base.html" %}
{% block title %} FixCity: Edit Bulk Order {% endblock %}

{% block extra_header %}

<script type="text/javascript" src="/site_media/openlayers/OpenLayers.js"></script>

<script type="text/javascript" src="/site_media/js/verify-rackmap.js">
</script>

{% endblock %}


{% block content %}
{% load attachments_tags %}

  <h2>Package {{cb}} Racks</h2>

  <h2>Instructions:</h2>
  
  <p>
   Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec hendrerit tempor tellus. Donec pretium posuere tellus. Proin quam nisl, tincidunt et, mattis eget, convallis nec, purus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nulla posuere. Donec vitae dolor. Nullam tristique diam non turpis. Cras placerat accumsan nulla. Nullam rutrum. Nam vestibulum accumsan nisl.
  </p>

<div class="attachments">
  {% get_attachments_for bulk_order as "bo_attachments" %}

  <form method="post" enctype="multipart/form-data" action="/attachments/add-for/bmabr/nycdotbulkorder/{{bo.pk}}/" class="add-attachment">
    <input type="hidden" name="next" value="/communityboard/{{cb.gid}}/bulk_order/"/>
    <div><label for="id_attachment_file">Upload Supporting Documents</label> <input type="file" name="attachment_file" id="id_attachment_file" /></div>

    <p class="submit">
        <input type="submit" value="UPLOAD"/>
    </p>
  </form>

  {% if bo_attachments %}
    <ul>
    {% for attachment in bo_attachments %}
     <li>
        <a href="{{ attachment.attachment_file.url }}">{{ attachment.filename }}</a>
        {% attachment_delete_link attachment %}
     </li>
    {% endfor %}
    </ul>
  {% endif %}


</div>

<form id="bulk-order-edit-form" action="." method="POST"
enctype="multipart/form-data">
<input type="submit" value="SUBMIT TO DOT" />
</form>

<div id="verify-map-wrap">
  <div id="verify-map"><div id="map-legend" class="pngfix"></div></div>
</div>

<div>
<a href="order.csv">Download bulk order as a CSV</a>
<br/>
<a href="order.pdf">Download bulk order as a PDF</a>
</div>


{% endblock %}


{% block extra_footer %}
<script type="text/javascript">
//<![CDATA[

  // Override the params function to hardcode cb & borough

  var getParamsFn = function() {
    return {
     verified: 'all',
    boro: {{ cb.borough.gid }},
    cb: {{ cb.gid }}
    };
  };

  jQuery(document).ready(function($) {
    updateMapFn();
  });
//]]>
</script>
{% endblock %}
